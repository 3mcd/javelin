<!DOCTYPE html>
<html lang="en">
    <head>
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta http-equiv="content-type" content="text/html; charset=utf-8">

      <!-- Enable responsiveness on mobile devices-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

      <title>Javelin Docs</title>

      
      <script src="/javelin-ecs.bundle.min.js" type="text/javascript"></script>
      

      <!-- CSS -->
      
      <link rel="preconnect" href="https://fonts.gstatic.com">
      <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
      <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
      <link rel="stylesheet" href="https://javelin.games/book.css">
      

      
      
    </head>

    <body>
        <header>
          <section>
            <nav>
              <a class="fat" href="/introduction"><h1>Javelin</h1></a>
              <a class="version" href="https:&#x2F;&#x2F;github.com&#x2F;3mcd&#x2F;javelin/releases/tag/v0.19.3">v0.19.3</a>
            </nav>
            <nav>
              <a class="fat disabled" href="#">API Docs</a>
              <a class="fat" href="https:&#x2F;&#x2F;github.com&#x2F;3mcd&#x2F;javelin">GitHub</a>
            </nav>
          </section>
        </header>
        <main>
          <section>
            <div class="menu">
                
                
                <nav role="navigation">
                    <ul>
                        
                            
                            
                                
                                <li >
                                    
                                    <a href="https:&#x2F;&#x2F;javelin.games&#x2F;installation&#x2F;">
                                        
                                        Installation
                                    </a>
                                    
                                </li>
                            
                                
                                <li >
                                    
                                    <a href="https:&#x2F;&#x2F;javelin.games&#x2F;introduction&#x2F;">
                                        
                                        Introduction
                                    </a>
                                    
                                </li>
                            
                                
                                <li >
                                    
                                    <a href="https:&#x2F;&#x2F;javelin.games&#x2F;ecs&#x2F;">
                                        
                                        ECS
                                    </a>
                                    
                                        <ul>
                                            
                                                <li >
                                                    <a href="https:&#x2F;&#x2F;javelin.games&#x2F;ecs&#x2F;world&#x2F;">
                                                        
                                                        World
                                                    </a>
                                                </li>
                                            
                                                <li class="active">
                                                    <a href="https:&#x2F;&#x2F;javelin.games&#x2F;ecs&#x2F;components&#x2F;">
                                                        
                                                        Components
                                                    </a>
                                                </li>
                                            
                                                <li >
                                                    <a href="https:&#x2F;&#x2F;javelin.games&#x2F;ecs&#x2F;entities&#x2F;">
                                                        
                                                        Entities
                                                    </a>
                                                </li>
                                            
                                                <li >
                                                    <a href="https:&#x2F;&#x2F;javelin.games&#x2F;ecs&#x2F;systems&#x2F;">
                                                        
                                                        Systems
                                                    </a>
                                                </li>
                                            
                                                <li >
                                                    <a href="https:&#x2F;&#x2F;javelin.games&#x2F;ecs&#x2F;filtering&#x2F;">
                                                        
                                                        Filtering
                                                    </a>
                                                </li>
                                            
                                                <li >
                                                    <a href="https:&#x2F;&#x2F;javelin.games&#x2F;ecs&#x2F;topics&#x2F;">
                                                        
                                                        Topics
                                                    </a>
                                                </li>
                                            
                                                <li >
                                                    <a href="https:&#x2F;&#x2F;javelin.games&#x2F;ecs&#x2F;change-detection&#x2F;">
                                                        
                                                        Change Detection
                                                    </a>
                                                </li>
                                            
                                                <li >
                                                    <a href="https:&#x2F;&#x2F;javelin.games&#x2F;ecs&#x2F;performance&#x2F;">
                                                        
                                                        Performance
                                                    </a>
                                                </li>
                                            
                                        </ul>
                                    
                                </li>
                            
                                
                                <li >
                                    
                                    <a href="https:&#x2F;&#x2F;javelin.games&#x2F;networking&#x2F;">
                                        
                                        Networking
                                    </a>
                                    
                                </li>
                            
                                
                                <li >
                                    
                                    <a href="https:&#x2F;&#x2F;javelin.games&#x2F;resources&#x2F;">
                                        
                                        Resources
                                    </a>
                                    
                                </li>
                            
                        
                    </ul>
                </nav>
                
                
            </div>

            <div class="page">
                <div class="page__content">
                    
                    <div class="search-container">
                        <input id="search" type="search" placeholder="Search..">
                        <div class="search-results">
                            <div class="search-results__header"></div>
                            <ul class="search-results__items"></ul>
                        </div>
                    </div>
                    
                    <div class="book-content">
                        
<h1>Components</h1>
<p>All data within a <code>World</code> is stored in components. Components are just plain objects; unremarkable, other than one reserved field: <code>_tid</code> — short for type id, a unique integer that is shared between all components of the same kind.</p>
<p>The <code>_tid</code> field establishes the taxonomy that Javelin uses to store and retrieve components. Take the following example.</p>
<pre><code>const position = { _tid: 0, x: 2, y: 2 }
const health = { _tid: 0, value: 100 }
</code></pre>
<p>Using the same <code>_tid</code> for components with a different shape could result in catastrophic behavior of your application. Wherever you might be working with an entity's position component, there's a chance you could have a health object instead!</p>
<p>Just make the types unique:</p>
<pre><code>const position = { _tid: 0, ... }
const health = { _tid: 1, ... }
</code></pre>
<h2 id="component-types">Component Types<a class="zola-anchor" href="#component-types" aria-label="Anchor link for: component-types"
  >#</a
>
</h2>
<p>It's recommended to use the <code>createComponentType</code> helper to define the component types your world will use. Component types make it easy to initialize components from a schema, and components created with a component type are automatically pooled.</p>
<pre><code>import { createComponentType, number } from &quot;@javelin/ecs&quot;

const Position = createComponentType({
  type: 1,
  schema: {
    x: number,
    y: number,
  },
})
</code></pre>
<p>A component type has, at minimum, a type (discussed above) and <strong>schema</strong>.</p>
<h3 id="schema">Schema<a class="zola-anchor" href="#schema" aria-label="Anchor link for: schema"
  >#</a
>
</h3>
<p>A component type's schema defines the field names and data types that make up the shape of the component. The schema is used to initialize component instances and reset them when they are detached from an entity.</p>
<p>The schema currently supports the following data types:</p>
<pre><code>number  (default = 0)
boolean (default = false)
string  (default = &quot;&quot;)
array   (default = [])
</code></pre>
<p>A default value for a data type can be specified in the schema by wrapping the data type in an object:</p>
<pre><code>schema: {
  x: { type: number, defaultValue: -1 }
}
</code></pre>
<h3 id="creating-components">Creating components<a class="zola-anchor" href="#creating-components" aria-label="Anchor link for: creating-components"
  >#</a
>
</h3>
<p>Components can be initialized from component types via <code>world.component</code>:</p>
<pre><code>const position = world.component(Position)

position.x (0)
position.y (0)
</code></pre>
<p>You may also specify an initializer function for a component type to make component creation easier.</p>
<pre><code>const Position = createComponentType({
  ...
  initialize(position, x = 0, y = 0) {
    position.x = x
    position.y = y
  },
})

const position = world.component(
  Position,
  10, (x)
  20, (y)
)
</code></pre>
<h3 id="object-pooling">Object Pooling<a class="zola-anchor" href="#object-pooling" aria-label="Anchor link for: object-pooling"
  >#</a
>
</h3>
<p>Components created via a component type are automatically pooled. By default, the pool will initialize 10^3 components for usage, and will grow by the same amount when the pool shinks to zero. This may not be ideal, especially for singletons or components that are created/destroyed extremely often. You can modify the default pool size of all component types by setting the <code>componentPoolSize</code> option on the config object passed to <code>createWorld()</code></p>
<pre><code>const world = createWorld({
  componentPoolSize: 100,
})
</code></pre>
<p>or you can specify the pool size for a single component type when registering the it with <code>world.registerComponentType</code></p>
<pre><code>world.registerComponentType(Position, 10000)
</code></pre>
<aside>
  <p>
    <strong>Note</strong> — the configured or default pool size will be used if a component type is encountered by <code>world.component()</code> prior to manual registration.
  </p>
</aside> 
                    </div>
                </div>
            </div>
          </section>
        </main>


        
        
    </body>

</html>
