<!DOCTYPE html>
<html lang="en">
    <head>
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta http-equiv="content-type" content="text/html; charset=utf-8">

      <!-- Enable responsiveness on mobile devices-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

      <title>Javelin Docs</title>

      
      

      <!-- CSS -->
      
      <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
      <link rel="stylesheet" href="https://javelin.games/book.css">
      

      
      
    </head>

    <body>
        <header>
          <section>
            <nav>
              <a href="/introduction">Javelin</a>
            </nav>
            <nav>
              <a href="#" class="disabled">API Docs</a>
              <a href="https://github.com/3mcd/javelin">GitHub</a>
            </nav>
          </section>
        </header>
        <main>
          <section>
            <div class="menu">
                
                
                <nav role="navigation">
                    <ul>
                        
                            
                            
                                
                                <li >
                                    
                                    <a href="https:&#x2F;&#x2F;javelin.games&#x2F;introduction&#x2F;">
                                        
                                        Introduction
                                    </a>
                                    
                                </li>
                            
                                
                                <li class="active">
                                    
                                    <a href="https:&#x2F;&#x2F;javelin.games&#x2F;ecs&#x2F;">
                                        
                                        ECS
                                    </a>
                                    
                                        <ul>
                                            
                                                <li >
                                                    <a href="https:&#x2F;&#x2F;javelin.games&#x2F;ecs&#x2F;installation&#x2F;">
                                                        
                                                        Installation
                                                    </a>
                                                </li>
                                            
                                                <li >
                                                    <a href="https:&#x2F;&#x2F;javelin.games&#x2F;ecs&#x2F;world&#x2F;">
                                                        
                                                        Hello World
                                                    </a>
                                                </li>
                                            
                                                <li >
                                                    <a href="https:&#x2F;&#x2F;javelin.games&#x2F;ecs&#x2F;entities&#x2F;">
                                                        
                                                        Entities
                                                    </a>
                                                </li>
                                            
                                                <li >
                                                    <a href="https:&#x2F;&#x2F;javelin.games&#x2F;ecs&#x2F;components&#x2F;">
                                                        
                                                        Components
                                                    </a>
                                                </li>
                                            
                                                <li >
                                                    <a href="https:&#x2F;&#x2F;javelin.games&#x2F;ecs&#x2F;systems&#x2F;">
                                                        
                                                        Systems
                                                    </a>
                                                </li>
                                            
                                                <li >
                                                    <a href="https:&#x2F;&#x2F;javelin.games&#x2F;ecs&#x2F;filtering&#x2F;">
                                                        
                                                        Filtering
                                                    </a>
                                                </li>
                                            
                                                <li >
                                                    <a href="https:&#x2F;&#x2F;javelin.games&#x2F;ecs&#x2F;tagging&#x2F;">
                                                        
                                                        Tagging
                                                    </a>
                                                </li>
                                            
                                                <li >
                                                    <a href="https:&#x2F;&#x2F;javelin.games&#x2F;ecs&#x2F;topics&#x2F;">
                                                        
                                                        Topics
                                                    </a>
                                                </li>
                                            
                                                <li >
                                                    <a href="https:&#x2F;&#x2F;javelin.games&#x2F;ecs&#x2F;performance&#x2F;">
                                                        
                                                        Performance
                                                    </a>
                                                </li>
                                            
                                        </ul>
                                    
                                </li>
                            
                                
                                <li >
                                    
                                    <a href="https:&#x2F;&#x2F;javelin.games&#x2F;networking&#x2F;">
                                        
                                        Networking
                                    </a>
                                    
                                </li>
                            
                                
                                <li >
                                    
                                    <a href="https:&#x2F;&#x2F;javelin.games&#x2F;devtools&#x2F;">
                                        
                                        Devtools
                                    </a>
                                    
                                </li>
                            
                                
                                <li >
                                    
                                    <a href="https:&#x2F;&#x2F;javelin.games&#x2F;examples&#x2F;">
                                        
                                        Examples
                                    </a>
                                    
                                </li>
                            
                        
                    </ul>
                </nav>
                
                
            </div>

            <div class="page">
                <div class="page__content">
                    
                    <div class="search-container">
                        <input id="search" type="search" placeholder="Search..">
                        <div class="search-results">
                            <div class="search-results__header"></div>
                            <ul class="search-results__items"></ul>
                        </div>
                    </div>
                    
                    <div class="book-content">
                        
<h1>ECS</h1>
<h2 id="what-s-an-ecs">What's an ECS?<a class="zola-anchor" href="#what-s-an-ecs" aria-label="Anchor link for: what-s-an-ecs"
  >#</a
>
</h2>
<p>In traditional OOP game development, entity data and behavior is often architected using a class heirarchy. Take the following example, where a <code>Player</code> class extends a physics <code>Body</code> class to enhance players with physics properties:</p>
<aside>
  <p>
    <strong>Note</strong> â€” all code in this section is pseudo-code. Skip to the <a href="/ecs/world">Hello World</a> section if you're ready for real examples.
  </p>
</aside>
<pre style="background-color:#f6f8f8;">
<code><span style="color:#388282;">class </span><span style="color:#555c64;">Body {
  </span><span style="color:#388282;">readonly </span><span style="color:#555c64;">velocity </span><span style="color:#388282;">= </span><span style="color:#555c64;">[</span><span style="color:#4179ad;">0</span><span style="color:#555c64;">, </span><span style="color:#4179ad;">0</span><span style="color:#555c64;">]
}

</span><span style="color:#388282;">class </span><span style="color:#555c64;">Player </span><span style="color:#388282;">extends </span><span style="color:#88669e;">Body </span><span style="color:#555c64;">{
  </span><span style="color:#388282;">readonly </span><span style="color:#555c64;">name</span><span style="color:#388282;">: </span><span style="color:#88669e;">string

  </span><span style="color:#388282;">constructor</span><span style="color:#555c64;">(</span><span style="color:#8a6c3c;">name</span><span style="color:#388282;">: </span><span style="color:#88669e;">string</span><span style="color:#555c64;">) {
    super()
    this.name </span><span style="color:#388282;">= </span><span style="color:#555c64;">name
  }

  jump() {
    this.velocity[</span><span style="color:#4179ad;">1</span><span style="color:#555c64;">] </span><span style="color:#388282;">+= </span><span style="color:#4179ad;">2
  </span><span style="color:#555c64;">}
}

</span><span style="color:#388282;">const </span><span style="color:#555c64;">input </span><span style="color:#388282;">= new </span><span style="color:#555c64;">Input()
</span><span style="color:#388282;">const </span><span style="color:#555c64;">player </span><span style="color:#388282;">= new </span><span style="color:#555c64;">Player()

setInterval(() </span><span style="color:#388282;">=&gt; </span><span style="color:#555c64;">{
  </span><span style="color:#388282;">if </span><span style="color:#555c64;">(input.isSpacebarPressed()) {
    </span><span style="color:#8c95a0;">// apply force to launch player into the air
    </span><span style="color:#555c64;">player.jump()
  }
}, </span><span style="color:#4179ad;">16.66666</span><span style="color:#555c64;">)
</span></code></pre>
<p>The player presses the spacebar on their keyboard, <code>player.jump()</code> is executed, and the actor jumps! But what if a player wants to spectate our game instead controlling an actor? In that scenario, it's unnecessary for <code>Player</code> to extend <code>Body</code>, and we'd either need to write code to ensure that spectators shouldn't update data within the physics simulation, or drastically modify our inheritance structure.</p>
<p>Data and behavior are separate concerns in an ECS. High-cohesion game objects are replaced with distinct <strong>entities</strong>, <strong>components</strong>, and <strong>systems</strong>. This pattern gives us the ability to modify the behavior of entities at runtime.</p>
<h3 id="components">Components<a class="zola-anchor" href="#components" aria-label="Anchor link for: components"
  >#</a
>
</h3>
<p>Components are plain objects that contain data, but not methods. Ideally all game state lives in components.</p>
<pre style="background-color:#f6f8f8;">
<code><span style="color:#388282;">type </span><span style="color:#555c64;">Player </span><span style="color:#388282;">= </span><span style="color:#555c64;">{ name</span><span style="color:#388282;">: </span><span style="color:#88669e;">string </span><span style="color:#555c64;">}
</span><span style="color:#388282;">type </span><span style="color:#555c64;">Input </span><span style="color:#388282;">= </span><span style="color:#555c64;">{ space</span><span style="color:#388282;">: </span><span style="color:#88669e;">boolean </span><span style="color:#555c64;">}
</span><span style="color:#388282;">type </span><span style="color:#555c64;">Body </span><span style="color:#388282;">= </span><span style="color:#555c64;">{ velocity</span><span style="color:#388282;">: </span><span style="color:#555c64;">[</span><span style="color:#88669e;">number</span><span style="color:#555c64;">, </span><span style="color:#88669e;">number</span><span style="color:#555c64;">] }
</span></code></pre><h3 id="entities">Entities<a class="zola-anchor" href="#entities" aria-label="Anchor link for: entities"
  >#</a
>
</h3>
<p>Entities are tuples of components that represent higher-order game objects. They do not contain any data of their own.</p>
<pre style="background-color:#f6f8f8;">
<code><span style="color:#8c95a0;">// (Player, Input, Velocity)
</span><span style="color:#388282;">const </span><span style="color:#555c64;">entity </span><span style="color:#388282;">= </span><span style="color:#555c64;">[
  { name: </span><span style="color:#4179ad;">&quot;xXpubstomperXx&quot; </span><span style="color:#555c64;">},
  { space: </span><span style="color:#a35d66;">true </span><span style="color:#555c64;">},
  { velocity: [</span><span style="color:#4179ad;">0</span><span style="color:#555c64;">, </span><span style="color:#4179ad;">0</span><span style="color:#555c64;">] },
]
</span></code></pre><h3 id="systems">Systems<a class="zola-anchor" href="#systems" aria-label="Anchor link for: systems"
  >#</a
>
</h3>
<p>Systems are functions that implement game logic by reading and modifying components. The following example updates the player's physics body based on its input component:</p>
<pre style="background-color:#f6f8f8;">
<code><span style="color:#388282;">const </span><span style="color:#555c64;">physicsSystem </span><span style="color:#388282;">= </span><span style="color:#555c64;">() </span><span style="color:#388282;">=&gt; </span><span style="color:#555c64;">{
  </span><span style="color:#388282;">const </span><span style="color:#555c64;">[, input, body] </span><span style="color:#388282;">= </span><span style="color:#555c64;">entity

  </span><span style="color:#388282;">if </span><span style="color:#555c64;">(input.space) {
    body.velocity[</span><span style="color:#4179ad;">1</span><span style="color:#555c64;">] </span><span style="color:#388282;">+= </span><span style="color:#4179ad;">2
  </span><span style="color:#555c64;">}
}
</span></code></pre><h2 id="iteration">Iteration<a class="zola-anchor" href="#iteration" aria-label="Anchor link for: iteration"
  >#</a
>
</h2>
<p>The above example where a single entity is modified each tick wouldn't scale to a game of any real complexity. The true power of ECS comes with iteration. We can apply the same rules to each entity in our game world with a simple for..of loop.</p>
<pre style="background-color:#f6f8f8;">
<code><span style="color:#388282;">const </span><span style="color:#555c64;">physicsSystem </span><span style="color:#388282;">= </span><span style="color:#555c64;">() </span><span style="color:#388282;">=&gt; </span><span style="color:#555c64;">{
  </span><span style="color:#388282;">for </span><span style="color:#555c64;">(</span><span style="color:#388282;">const </span><span style="color:#555c64;">[player, input, body] </span><span style="color:#388282;">of </span><span style="color:#555c64;">playersWithBodies) {
    </span><span style="color:#8c95a0;">// do something for each player with input and body components
  </span><span style="color:#555c64;">}
}
</span></code></pre>
<p>We can add jump behavior to <em>all</em> players that have both an input and a body component!</p>
<p>Spectators can now be represented with a <code>(Player, Input)</code> entity. Even though they aren't controlling a physics body yet, the <code>Input</code> component might allow them to move the game camera around. If the player chooses to enter the fray, we can insert a <code>Body</code> component into their entity, allowing them to control an actor in the scene.</p>
<pre style="background-color:#f6f8f8;">
<code><span style="color:#388282;">for </span><span style="color:#555c64;">(</span><span style="color:#388282;">const </span><span style="color:#555c64;">[player] </span><span style="color:#388282;">of </span><span style="color:#555c64;">players) {
  </span><span style="color:#388282;">if </span><span style="color:#555c64;">(player.joining </span><span style="color:#388282;">&amp;&amp; !</span><span style="color:#555c64;">hasBody(player)) {
    world.insert(player, [body])
    player.joining </span><span style="color:#388282;">= </span><span style="color:#a35d66;">false
  </span><span style="color:#555c64;">}
}
</span></code></pre>
<p>The player's entity is now <code>(Player, Input, Body)</code>, making it eligible for physics updates from the physics simulation.</p>
<p>This pattern can be applied to many types of games. For example, an FPS game might consist of systems that handle physics, user input and movement, projectile collisions, and player inventory.</p>
 
                    </div>
                </div>
            </div>
          </section>
        </main>


        
        
    </body>

</html>
