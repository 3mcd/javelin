<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />

    <!-- Enable responsiveness on mobile devices-->
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1"
    />

    <title>Javelin Docs</title>

    <script src="/javelin-ecs.bundle.min.js" type="text/javascript"></script>

    <!-- CSS -->

    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,400;0,700;1,400&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="https://javelin.games/book.css" />
  </head>

  <body>
    <header>
      <section>
        <nav>
          <a class="fat" href="/introduction"><h1>Javelin</h1></a>
          <a
            class="version"
            href="https:&#x2F;&#x2F;github.com&#x2F;3mcd&#x2F;javelin/releases/tag/v0.21.0"
            >v0.21.0</a
          >
        </nav>
        <nav>
          <a class="fat disabled" href="#">API Docs</a>
          <a
            class="fat"
            href="https:&#x2F;&#x2F;github.com&#x2F;3mcd&#x2F;javelin"
            >GitHub</a
          >
        </nav>
      </section>
    </header>
    <main>
      <section>
        <div class="menu">
          <nav role="navigation">
            <ul>
              <li>
                <a
                  href="https:&#x2F;&#x2F;javelin.games&#x2F;introduction&#x2F;"
                >
                  <span>1. </span>
                  <strong>Introduction</strong>
                </a>
              </li>

              <li>
                <a href="https:&#x2F;&#x2F;javelin.games&#x2F;ecs&#x2F;">
                  <span>2. </span>
                  <strong>ECS</strong>
                </a>

                <ul>
                  <li>
                    <a
                      href="https:&#x2F;&#x2F;javelin.games&#x2F;ecs&#x2F;world&#x2F;"
                    >
                      World
                    </a>
                  </li>

                  <li>
                    <a
                      href="https:&#x2F;&#x2F;javelin.games&#x2F;ecs&#x2F;components&#x2F;"
                    >
                      Components
                    </a>
                  </li>

                  <li class="active">
                    <a
                      href="https:&#x2F;&#x2F;javelin.games&#x2F;ecs&#x2F;entities&#x2F;"
                    >
                      Entities
                    </a>
                  </li>

                  <li>
                    <a
                      href="https:&#x2F;&#x2F;javelin.games&#x2F;ecs&#x2F;systems&#x2F;"
                    >
                      Systems
                    </a>
                  </li>

                  <li>
                    <a
                      href="https:&#x2F;&#x2F;javelin.games&#x2F;ecs&#x2F;effects&#x2F;"
                    >
                      Effects
                    </a>
                  </li>

                  <li>
                    <a
                      href="https:&#x2F;&#x2F;javelin.games&#x2F;ecs&#x2F;events&#x2F;"
                    >
                      Events
                    </a>
                  </li>

                  <li>
                    <a
                      href="https:&#x2F;&#x2F;javelin.games&#x2F;ecs&#x2F;topics&#x2F;"
                    >
                      Topics
                    </a>
                  </li>

                  <li>
                    <a
                      href="https:&#x2F;&#x2F;javelin.games&#x2F;ecs&#x2F;change-detection&#x2F;"
                    >
                      Change Detection
                    </a>
                  </li>

                  <li>
                    <a
                      href="https:&#x2F;&#x2F;javelin.games&#x2F;ecs&#x2F;performance&#x2F;"
                    >
                      Performance
                    </a>
                  </li>
                </ul>
              </li>

              <li>
                <a href="https:&#x2F;&#x2F;javelin.games&#x2F;networking&#x2F;">
                  <span>3. </span>
                  <strong>Networking</strong>
                </a>
              </li>

              <li>
                <a href="https:&#x2F;&#x2F;javelin.games&#x2F;resources&#x2F;">
                  <span>4. </span>
                  <strong>Resources</strong>
                </a>
              </li>
            </ul>
          </nav>
        </div>

        <div class="page">
          <div class="page__content">
            <div class="search-container">
              <input id="search" type="search" placeholder="Search.." />
              <div class="search-results">
                <div class="search-results__header"></div>
                <ul class="search-results__items"></ul>
              </div>
            </div>

            <div class="book-content">
              <h1>Entities</h1>
              <p>
                An <strong>entity</strong> is a pointer to a unique collection
                of components that represent higher-order objects in your game.
                Entities are strictly defined by their component makeup, and do
                not contain any data or methods of their own.
              </p>
              <h2 id="entity-management">
                Entity Management<a
                  class="zola-anchor"
                  href="#entity-management"
                  aria-label="Anchor link for: entity-management"
                  >#</a
                >
              </h2>
              <p>A world has several methods for managing entities.</p>
              <h3 id="creating-entities">
                Creating Entities<a
                  class="zola-anchor"
                  href="#creating-entities"
                  aria-label="Anchor link for: creating-entities"
                  >#</a
                >
              </h3>
              <p>
                Entities are created using <code>world.spawn</code>. This method
                accepts 0..n components and returns the newly created entity.
              </p>
              <pre style="background-color: #f6f8f8">
<code><span style="color:#388282;">const </span><span style="color:#555c64;">player </span><span style="color:#388282;">= </span><span style="color:#555c64;">{ __type__: </span><span style="color:#4179ad;">1</span><span style="color:#555c64;">, name: </span><span style="color:#4179ad;">&quot;elrond&quot; </span><span style="color:#555c64;">}
</span><span style="color:#388282;">const </span><span style="color:#555c64;">health </span><span style="color:#388282;">= </span><span style="color:#555c64;">{ __type__: </span><span style="color:#4179ad;">2</span><span style="color:#555c64;">, value: </span><span style="color:#4179ad;">100 </span><span style="color:#555c64;">}
</span><span style="color:#388282;">const </span><span style="color:#555c64;">entity </span><span style="color:#388282;">= </span><span style="color:#555c64;">world.create(player, health)
</span></code></pre>
              <aside>
                <p>
                  <strong>Tip</strong> — although entities are simply
                  auto-incrementing integers (starting at <code>0</code>), they
                  should be treated as opaque values.
                </p>
              </aside>
              <h3 id="modifying-entities">
                Modifying Entities<a
                  class="zola-anchor"
                  href="#modifying-entities"
                  aria-label="Anchor link for: modifying-entities"
                  >#</a
                >
              </h3>
              <p>
                The array of components associated with an entity defines its
                <strong>archetype</strong>. The above example would create an
                entity of archetype <code>(Player, Health)</code>.
              </p>
              <p>
                Components can be assigned to existing entities using
                <code>world.attach</code>, and removed from entities using
                <code>world.detach</code>. The following example modifies an
                entity of archetype <code>(Player, Health)</code> to
                <code>(Player, Health, Input)</code>, and then back to
                <code>(Player, Health)</code>:
              </p>
              <pre style="background-color: #f6f8f8">
<code><span style="color:#388282;">const </span><span style="color:#555c64;">input </span><span style="color:#388282;">= </span><span style="color:#555c64;">{ __type__: </span><span style="color:#4179ad;">3</span><span style="color:#555c64;">, space: </span><span style="color:#a35d66;">true </span><span style="color:#555c64;">}

world.attach(entity, input)
world.step() </span><span style="color:#8c95a0;">// (Player, Health) -&gt; (Player, Health, Input)

</span><span style="color:#555c64;">world.detach(entity, input)
world.step() </span><span style="color:#8c95a0;">// (Player, Health, Input) -&gt; (Player, Health)
</span></code></pre>
              <aside>
                <p>
                  <strong>Tip</strong> — using <code>world.attach</code> and
                  <code>world.detach</code> to build entities is slower than
                  <code>world.create(...components)</code> because the
                  components of the affected entity must be relocated each time
                  the entity's archetype changes.
                </p>
              </aside>
              <h3 id="destroying-entities">
                Destroying Entities<a
                  class="zola-anchor"
                  href="#destroying-entities"
                  aria-label="Anchor link for: destroying-entities"
                  >#</a
                >
              </h3>
              <p>Entities are destroyed with <code>world.destroy</code>:</p>
              <pre style="background-color: #f6f8f8">
<code><span style="color:#555c64;">world.destroy(entity)
</span></code></pre>
              <p>
                When an entity is destroyed, its components are automatically
                released back to their object pool if they were derived from a
                component type.
              </p>
              <h2 id="world-operations">
                World Operations<a
                  class="zola-anchor"
                  href="#world-operations"
                  aria-label="Anchor link for: world-operations"
                  >#</a
                >
              </h2>
              <p>
                In the example above, <code>world.step()</code> was called each
                time entity was modified. Operations like creating and
                destroying entities, as well as attaching and detaching
                components, are deferred until the next
                <code>world.step()</code> call. This is done to improve the
                predictability of systems, so that systems never miss changes to
                entities, discussed in the
                <a href="/ecs/events">Events</a> section.
              </p>
              <p>
                Each of these changes is represented by a
                <code>WorldOp</code> object. You can review the types of
                operations in
                <a
                  href="https://github.com/3mcd/javelin/blob/master/packages/ecs/src/world_op.ts"
                  >world_op.ts</a
                >. These objects are used in the Javelin network protocol to
                synchronize entities reliably between client and server.
              </p>
            </div>
          </div>
        </div>
      </section>
    </main>
  </body>
</html>
